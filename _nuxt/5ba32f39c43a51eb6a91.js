(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{273:function(t){t.exports=JSON.parse('[{"id":1,"alias":"system","name":"系统通知","avatar":"/272670.jpg"},{"id":2,"alias":"alert","name":"牵手快讯","avatar":"/272644.jpg"}]')},306:function(t,e,r){var content=r(381);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(10).default)("185828e6",content,!0,{sourceMap:!1})},380:function(t,e,r){"use strict";var n=r(306);r.n(n).a},381:function(t,e,r){(t.exports=r(9)(!1)).push([t.i,".chatroom-type[data-v-9dc7ae96]{margin-top:56px}.chat-form__room-area[data-v-9dc7ae96]{border-radius:0 10px 10px 0;background:hsla(0,0%,50.2%,.3)}.contactor-info[data-v-9dc7ae96]{display:grid;grid-template-columns:48px auto;grid-column-gap:20px;height:65px;border-bottom:3px solid #55287e;padding:8px 20px;color:#55287e;font-size:18px;-webkit-box-align:center;align-items:center}.chat-content-container[data-v-9dc7ae96]{padding:0 20px;margin-top:20px;max-height:calc(100vh - 177px);min-height:calc(100vh - 177px);overflow-x:hidden;overflow-y:hidden}.chat-content-container.scrollable[data-v-9dc7ae96]{overflow-y:scroll}.msg-content[data-v-9dc7ae96]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:80%;background:#fff;font-size:16px;padding:10px;border:1.5px solid #55287e;margin-bottom:10px}.msg-content__from[data-v-9dc7ae96]{border-radius:0 15px 15px 15px}.msg-content__to[data-v-9dc7ae96]{border-radius:15px 0 15px 15px}.msg-content__main[data-v-9dc7ae96]{display:inline-block}.msg-content__datetime[data-v-9dc7ae96]{display:block;font-weight:700;color:#55287e}",""])},453:function(t,e,r){"use strict";r.r(e);r(32),r(21),r(16),r(11),r(24),r(33);var n=r(12),o=(r(58),r(85)),c=r(22),d=r(273);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var h={data:function(){return{allMTypeMessages:[],oms:d,scrollable:{chat:!1,history:!1}}},computed:{chat:function(){var t=this,e=this.oms.find((function(e){return e.alias===t.$route.params.type})),r=this.allMTypeMessages.filter((function(t){return t.length>0})).map((function(t){return t[0]})).find((function(t){return 0!==t.mtype&&t.mtype===e.id}));if(r)return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(source,!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},r,{sender:{avatar:e?e.avatar:"",nickname:e?e.name:""},mtype_name:e.alias})},messages:function(){var t=[];return 1===this.chat.mtype?t=this.allMTypeMessages[0]:2===this.chat.mtype&&(t=this.allMTypeMessages[1]),o._.sortBy(t,"timestamp")}},watch:{chat:function(t){var e=this;if(t){var r=this.oms.find((function(t){return t.alias===e.$route.params.type}));this.doReadTheMessage(this.chat.id).then((function(t){e.$store.commit("setMessageRead",{system:1===r.id||e.$store.getters.message_read.system,alert:2===r.id||e.$store.getters.message_read.alert,private:0===r.id||e.$store.getters.message_read.private}),console.log({"chatroom-type":e.$store.getters.message_read})}))}}},updated:function(){this.scrollable.history=this.$refs.chatContainer.scrollHeight>this.$refs.chatContainer.offsetHeight,this.$refs.chatContainer.scrollTop=this.$refs.chatContainer.scrollHeight},mounted:function(){var t=this,e=this.getCookie("id");e&&this.getChatHistory(e).then((function(e){t.allMTypeMessages=e}))},methods:{fdatetime:c.a.fdatetime}},m=(r(380),r(4)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"chatroom-type chat-form__room-area"},[r("div",{staticClass:"contactor-info"},[t.chat?[r("v-avatar",{attrs:{color:t.chat.sender.avatar?"white":void 0}},[r("v-img",{attrs:{src:t.chat.sender.avatar?t.chat.sender.avatar:""}})],1),t._v(" "),r("div",[t._v(t._s(t.chat.sender.nickname))])]:t._e()],2),t._v(" "),r("div",{ref:"chatContainer",class:["chat-content-container",t.scrollable.history?"scrollable":""]},[t.chat?t._l(t.messages,(function(e,n){return r("div",{key:n,staticClass:"msg-content msg-content__from"},[r("div",{staticClass:"msg-content__main"},[t._v(t._s(e.message))]),t._v(" "),r("span",{staticClass:"msg-content__datetime"},[t._v(t._s(t.fdatetime(e.timestamp)))])])})):t._e()],2)])}),[],!1,null,"9dc7ae96",null);e.default=component.exports}}]);